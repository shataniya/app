(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{119:function(e,a,t){},129:function(e,a,t){},15:function(e,a){e.exports={iptoggle:!1,sessdata:"d8b8d32e%2C1583203485%2C1aac7c21"}},188:function(e,a,t){},196:function(e,a,t){var n=t(63);function l(e,a){a||(a={});for(var t=a,n=0,l=e.length;n<l;n++)t=t[e[n]]?t[e[n]]:t[e[n]]={};return a}function r(e){return function(e){if(!Array.isArray(e))throw new Error("is not Array");for(var a={},t=0,n=e.length;t<n;t++)a=l(e[t],a);return a}(function(e){return n.readFileSync(e).toString().split("\n")}(e))}e.exports={checkSensitive:function(e,a){if("string"!==typeof e)throw new Error("str is not string!");for(var t=r(a),n=t,l=[],i=0,s=e.length;i<s;i++){var c=n[e[i]];if(c){if(l.push(e[i]),!Object.keys(c).length)break;n=c}else l=[],n=t}var o=e,m=null,h="",p=o;return l.length>=2?(m=!0,h=l.join(""),p=o.replace(h,"*".repeat(h.length))):m=!1,{origin:o,sensitive_word:h,origin_filter:p,hasSensitive:m}}}},197:function(e,a,t){e.exports=t(438)},202:function(e,a,t){},206:function(e,a,t){},210:function(e,a,t){},261:function(e,a,t){},265:function(e,a){},267:function(e,a){},393:function(e,a,t){},437:function(e,a,t){},438:function(e,a,t){"use strict";t.r(a);var n=t(0),l=t.n(n),r=t(11),i=t.n(r),s=(t(202),t(128),t(76)),c=t.n(s),o=t(3),m=t(2),h=t(5),p=t(4),u=t(7),d=t(6),g=(t(206),t(30)),f=t(50),v=(t(41),t(20)),b=t.n(v),y=(t(208),t(190)),E=t.n(y),k=(t(129),t(210),function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(h.a)(this,Object(p.a)(a).call(this,e))).state={imgArr:[{id:"01",src:"http://cdn.cnbj1.fds.api.mi-img.com/mi-mall/b830faf6f15af779b581cd6182a07bc3.jpg?w=2452&h=920",alt:"\u5c0f\u7c73\u624b\u673a"},{id:"02",src:"http://cdn.cnbj1.fds.api.mi-img.com/mi-mall/755aca9487082e7698e16f17cfb70839.jpg?w=2452&h=920",alt:"\u5c0f\u7c73\u624b\u8868"},{id:"03",src:"http://cdn.cnbj1.fds.api.mi-img.com/mi-mall/e52c3e98602b90f198ec316dce253cba.jpg?w=2452&h=920",alt:"\u5c0f\u7c73\u7535\u89c6"}],images:[]},t.handleError=t.handleError.bind(Object(u.a)(t)),t}return Object(d.a)(a,e),Object(m.a)(a,[{key:"handleError",value:function(){console.log("is error")}},{key:"UNSAFE_componentWillMount",value:function(){var e=this,a=this.state.imgArr,t=[];a.forEach((function(a){var n=new Image;n.src=a.src,n.onload=function(){t.push(n),e.setState({images:t})}}))}},{key:"render",value:function(){var e=this.state,a=e.images,t=e.imgArr;return 3===a.length?l.a.createElement("div",{className:"common-body",onError:this.handleError},l.a.createElement(E.a,{autoplay:!0},t.map((function(e){return l.a.createElement("img",{className:"home-carousel-img",key:e.id,src:e.src,"data-src":e.src,alt:e.alt})})))):l.a.createElement("div",{className:"common-loading",onError:this.handleError},l.a.createElement(b.a,{tip:"Loading...",size:"large"}))}}]),a}(l.a.Component)),N=(t(61),t(22)),O=t.n(N),w=(t(257),t(125)),j=t.n(w),S=(t(86),t(39)),C=t.n(S),x=(t(261),t(8)),_=t(10),T=t.n(_),I=t(66),B=t.n(I),P=(t(335),t(192)),A=t.n(P),M=(t(48),t(13)),V=t.n(M),U=function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(h.a)(this,Object(p.a)(a).call(this,e))).state={loading:!0},t.handleInitImg=t.handleInitImg.bind(Object(u.a)(t)),t.handleInitImg(),t}return Object(d.a)(a,e),Object(m.a)(a,[{key:"handleInitImg",value:function(){var e=this,a=this.props.state.src,t=new Image;t.src=a,t.onload=function(){e.setState({loading:!1})}}},{key:"render",value:function(){var e=this.props.state,a=e.nodeName,t=e.src,n=e.alt,r=e.BoxClassName,i=e.ImgClassName,s=this.state.loading;return a?"ASIDE"===a||"aside"===a?l.a.createElement("aside",{className:r},l.a.createElement(b.a,{spinning:s},l.a.createElement("img",{src:t,alt:n,className:i}))):void 0:l.a.createElement("div",{className:r},l.a.createElement(b.a,{spinning:s},l.a.createElement("img",{src:t,alt:n,className:i})))}}]),a}(l.a.Component),L=t(15),z=function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(h.a)(this,Object(p.a)(a).call(this,e))).state={loading:!0,search_list:null},t.handlePaginationChange=t.handlePaginationChange.bind(Object(u.a)(t)),t.handleSearchList=t.handleSearchList.bind(Object(u.a)(t)),t}return Object(d.a)(a,e),Object(m.a)(a,[{key:"handlePaginationChange",value:function(e){var a=this,t=this.props.state.search_text;L.iptoggle?T.a.get("http://satan.viphk.ngrok.org?aim=search&&val="+t+"&&page="+e).then((function(e){var t=e.data.filter((function(e){return"video"===e.result_type}))[0].data;a.setState({search_list:t})})):T.a.get("http://localhost:4000?aim=search&&val="+t+"&&page="+e).then((function(e){var t=e.data.filter((function(e){return"video"===e.result_type}))[0].data;a.setState({search_list:t})}))}},{key:"handleSearchList",value:function(e){return e.map((function(e){return l.a.createElement("a",{className:"search-item",key:e.id,href:"/search/player?arcurl="+e.arcurl+"&&tag="+e.tag},l.a.createElement(U,{state:{BoxClassName:"search-item-header",ImgClassName:"search-item-img",src:"http:"+e.pic,alt:e.typename}}),l.a.createElement("div",{className:"search-item-body"},l.a.createElement("p",{className:"search-item-date"},l.a.createElement("span",null,l.a.createElement(V.a,{type:"play-circle",theme:"filled"})," ",Object(x.handleView)(e.play)),l.a.createElement("span",null,l.a.createElement(V.a,{type:"clock-circle",theme:"filled"})," ",e.duration)),l.a.createElement("p",{className:"search-item-author"},l.a.createElement(V.a,{type:"twitter-circle",theme:"filled"})," ",e.author)))}))}},{key:"render",value:function(){var e=this.props.state.list,a=this.state.search_list,t=e.filter((function(e){return"video"===e.result_type}))[0].data;return a&&(t=a),l.a.createElement("div",{className:"search-list"},this.handleSearchList(t),l.a.createElement("div",{className:"search-pagination"},l.a.createElement(A.a,{defaultPageSize:20,total:1e3,onChange:this.handlePaginationChange})))}}]),a}(l.a.Component),D=(t(46),t(21)),W=t.n(D),K=t(127),F=(t(393),[.01]),R=function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(h.a)(this,Object(p.a)(a).call(this,e))).state={io:null,refs:null,images:null,loading:!0},t.handleonload=t.handleonload.bind(Object(u.a)(t)),t}return Object(d.a)(a,e),Object(m.a)(a,[{key:"UNSAFE_componentWillMount",value:function(){var e=this.props.state,a=e.ImgClassName,t=e.src,n=e.alt,r=e.ImgStyle,i=[],s=[],c=l.a.createRef();s.push(c),i.push(l.a.createElement("img",{className:a,ref:c,"data-src":t,alt:n,style:Object(K.a)({},r)})),this.setState({refs:s,images:i})}},{key:"componentDidMount",value:function(){var e=this,a=new IntersectionObserver((function(a){a.forEach((function(a){if(!(a.intersectionRatio<=0)){var t=e.props.state.src,n=a.target,l=new Image;l.src=t,l.onload=function(){e.setState({loading:!1}),n.src=n.dataset.src}}}))}),{threshold:F});this.setState({io:a})}},{key:"handleonload",value:function(){var e=this.state,a=e.io;e.refs.forEach((function(e){a.observe(e.current)}))}},{key:"render",value:function(){var e=this.props.state,a=e.BoxClassName,t=e.width,n=e.height,r=e.BoxStyle,i=this.state,s=i.images,c=i.loading;return l.a.createElement("div",{className:a,style:Object(K.a)({width:t,height:n},r)},l.a.createElement(b.a,{spinning:c},s,l.a.createElement("img",{onError:this.handleonload,src:"",alt:"lazyload",style:{display:"none"}})))}}]),a}(l.a.Component),G=function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(h.a)(this,Object(p.a)(a).call(this,e))).state={},t.handlEpsTag=t.handlEpsTag.bind(Object(u.a)(t)),t.handleBangumiTagClick=t.handleBangumiTagClick.bind(Object(u.a)(t)),t.handleButtonClick=t.handleButtonClick.bind(Object(u.a)(t)),t}return Object(d.a)(a,e),Object(m.a)(a,[{key:"handleBangumiTagClick",value:function(e,a){return{pathname:"/search/bangumi",state:{data:e,index:a}}}},{key:"handleButtonClick",value:function(e){return{pathname:"/search/bangumi",state:{list:e}}}},{key:"handlEpsTag",value:function(e,a,t){var n=this;return e.length?e.length>21?l.a.createElement("div",{className:"bangumi-info-tag-over"},e.map((function(a,t){return l.a.createElement(O.a,{color:"purple",key:a.id,style:{marginBottom:8}},l.a.createElement(g.c,{to:n.handleBangumiTagClick(e,t)},t+1))}))):l.a.createElement("div",{className:"bangumi-info-tag"},e.map((function(a,t){return l.a.createElement(O.a,{color:"purple",key:a.id,style:{marginBottom:8}},l.a.createElement(g.c,{to:n.handleBangumiTagClick(e,t)},t+1))}))):"media_ft"===a?l.a.createElement("div",{className:"bangumi-info-button"},l.a.createElement(W.a,{type:"primary",shape:"round"},l.a.createElement(g.c,{to:this.handleButtonClick(t)},l.a.createElement(V.a,{type:"play-circle",theme:"filled"})," \u7acb\u5373\u89c2\u770b"))):void 0}},{key:"render",value:function(){var e=this,a=this.props,t=a.list,n=a.type||"media_bangumi",r=t.filter((function(e){return e.result_type===n}))[0].data;return l.a.createElement("div",{className:"search-bangumi"},r.map((function(a){return l.a.createElement("div",{className:"bangumi-item",key:a.media_id},l.a.createElement(R,{state:{BoxClassName:"bangumi-avatar",ImgClassName:"bangumi-img",src:a.cover,alt:a.title}}),l.a.createElement("section",{className:"bangumi-info"},l.a.createElement("h1",{className:"bangumi-info-headline"},l.a.createElement(O.a,{color:"magenta"},a.season_type_name),l.a.createElement("span",{className:"bangumi-info-title"},Object(x.handleTitle)(a.title))),l.a.createElement("div",{className:"bangumi-info-line"},l.a.createElement("p",{className:"info-line-left"},l.a.createElement("span",{className:"label"},"\u98ce\u683c\uff1a"),l.a.createElement("span",{className:"value"},a.styles)),l.a.createElement("p",{className:"info-line-right"},l.a.createElement("span",{className:"label"},"\u5730\u533a\uff1a"),l.a.createElement("span",{className:"value"},a.areas))),l.a.createElement("div",{className:"bangumi-info-line"},l.a.createElement("p",{className:"info-line-left"},l.a.createElement("span",{className:"label"},"\u5f00\u64ad\u65f6\u95f4\uff1a"),l.a.createElement("span",{className:"value"},Object(x.handledate)(a.pubtime))),l.a.createElement("p",{className:"info-line-right"},l.a.createElement("span",{className:"label"},"\u58f0\u4f18\uff1a"),l.a.createElement("span",{className:"value"},a.cv))),l.a.createElement("p",{className:"bangumi-info-desc"},"\u7b80\u4ecb\uff1a",a.desc),e.handlEpsTag(a.eps,n,a)))})))}}]),a}(l.a.Component),H="",J=function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(h.a)(this,Object(p.a)(a).call(this,e))).state={list:[],history:[],isloading:!1,page:""},t.handleSearch=t.handleSearch.bind(Object(u.a)(t)),t.handleClick=t.handleClick.bind(Object(u.a)(t)),t.handleTagClose=t.handleTagClose.bind(Object(u.a)(t)),t.handleTagChange=t.handleTagChange.bind(Object(u.a)(t)),t}return Object(d.a)(a,e),Object(m.a)(a,[{key:"handleSearch",value:function(e){var a=this;if(e){var t=localStorage.getItem("search-history"),n=null;t?((n=t.split(",")).push(e),n=Array.from(new Set(n))):n=[e],localStorage.setItem("search-history",n),this.setState({history:n}),L.iptoggle?T.a.get("http://satan.viphk.ngrok.org?aim=search&&val="+e).then((function(e){var t=e.data;a.setState({list:t,isloading:!1})})):T.a.get("http://localhost:4000?aim=search&&val="+e).then((function(e){var t=e.data;a.setState({list:t,isloading:!1})}))}}},{key:"UNSAFE_componentWillMount",value:function(){var e=this.props.location.search.replace("?",""),a=B.a.parse(e).val;H=a,a&&(this.setState({isloading:!0}),this.handleSearch(a));var t=localStorage.getItem("search-history"),n=[];t&&(n=t.split(",")),n=Array.from(new Set(n)),this.setState({history:n})}},{key:"handleClick",value:function(e){var a=e.target.textContent;H=a,this.setState({isloading:!0}),this.handleSearch(a)}},{key:"handleTagClose",value:function(e){var a=function e(a){return"SPAN"===a.nodeName?a.textContent:e(a.parentNode)}(e.target),t=localStorage.getItem("search-history").split(",");t=t.filter((function(e){return e!==a})),this.setState({history:t}),localStorage.setItem("search-history",t)}},{key:"handleTagChange",value:function(e){var a=e.target.value;this.setState({page:a})}},{key:"handlePageReflash",value:function(e,a){switch(e||"video"){case"video":return l.a.createElement(z,{state:{list:a,search_text:H}});case"media_bangumi":return l.a.createElement(G,{list:a,type:"media_bangumi"});case"media_ft":return l.a.createElement(G,{list:a,type:"media_ft"})}}},{key:"render",value:function(){var e=this,a=this.state,t=a.list,n=a.history,r=a.isloading,i=a.page;return r?l.a.createElement("div",{className:"common-loading"},l.a.createElement(b.a,{tip:"Loading...",size:"large"})):t.length?l.a.createElement("div",{className:"common-body"},l.a.createElement(C.a.Search,{placeholder:"\u641c\u7d22\u89c6\u9891...",style:{width:200,marginTop:50},onSearch:this.handleSearch}),l.a.createElement("div",{className:"search-tag"},l.a.createElement(j.a.Group,{defaultValue:"video",onChange:this.handleTagChange},t.map((function(e){return l.a.createElement(j.a.Button,{value:e.result_type,key:e.result_type},Object(x.handleType)(e.result_type))})))),this.handlePageReflash(i,t)):n.length?l.a.createElement("div",{className:"common-body"},l.a.createElement("h1",{style:{marginTop:50}},"Wonderful video, waiting for you to search ..."),l.a.createElement(C.a.Search,{placeholder:"Search for video ...",style:{width:200,marginTop:50},onSearch:this.handleSearch}),l.a.createElement("div",{className:"search-history",onClick:this.handleClick},l.a.createElement("p",{className:"history-list"},"search history:"),n.map((function(a){return l.a.createElement(O.a,{closable:!0,key:a,color:"green",onClose:e.handleTagClose},a)})))):l.a.createElement("div",{className:"common-body"},l.a.createElement("h1",{style:{marginTop:50}},"Wonderful video, waiting for you to search ..."),l.a.createElement(C.a.Search,{placeholder:"Search for video ...",style:{width:200,marginTop:50},onSearch:this.handleSearch}),l.a.createElement("div",{className:"search-history"},l.a.createElement("p",{className:"history-list"},"No search history...")))}}]),a}(l.a.Component),X=(t(414),t(195)),$=t.n(X),q=(t(416),t(126)),Q=t.n(q),Y=(t(417),t(31)),Z=t.n(Y),ee=function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(h.a)(this,Object(p.a)(a).call(this,e))).state={},t}return Object(d.a)(a,e),Object(m.a)(a,[{key:"render",value:function(){return l.a.createElement("div",{className:"option-body"},l.a.createElement("h1",null,"Welcome to view the paper!"))}}]),a}(l.a.Component),ae=function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(h.a)(this,Object(p.a)(a).call(this,e))).state={},t}return Object(d.a)(a,e),Object(m.a)(a,[{key:"render",value:function(){return l.a.createElement("div",{className:"option-body"},l.a.createElement("h1",null,"this is Option1 Component!"))}}]),a}(l.a.Component),te=function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(h.a)(this,Object(p.a)(a).call(this,e))).state={},t}return Object(d.a)(a,e),Object(m.a)(a,[{key:"render",value:function(){return l.a.createElement("div",{className:"option-body"},l.a.createElement("h1",null,"this is Option2 Component!"))}}]),a}(l.a.Component),ne=function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(h.a)(this,Object(p.a)(a).call(this,e))).state={},t}return Object(d.a)(a,e),Object(m.a)(a,[{key:"render",value:function(){return l.a.createElement("div",{className:"option-body"},l.a.createElement("h1",null,"this is Option3 Component!"))}}]),a}(l.a.Component),le=function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(h.a)(this,Object(p.a)(a).call(this,e))).state={},t}return Object(d.a)(a,e),Object(m.a)(a,[{key:"render",value:function(){return l.a.createElement("div",{className:"option-body"},l.a.createElement("h1",null,"this is Option4 Component!"))}}]),a}(l.a.Component),re=Z.a.SubMenu;for(var ie=function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(h.a)(this,Object(p.a)(a).call(this,e))).state={openKeys:["sub1"]},t.rootSubmenuKeys=["sub1","sub2","sub4"],t.onOpenChange=t.onOpenChange.bind(Object(u.a)(t)),t.handleSelect=t.handleSelect.bind(Object(u.a)(t)),t}return Object(d.a)(a,e),Object(m.a)(a,[{key:"onOpenChange",value:function(e){var a=this,t=e.find((function(e){return-1===a.state.openKeys.indexOf(e)}));-1===this.rootSubmenuKeys.indexOf(t)?this.setState({openKeys:e}):this.setState({openKeys:t?[t]:[]})}},{key:"handleSelect",value:function(e){!function(e){var a="";a=L.iptoggle?"http://sha.viphk.ngrok.org/about#":"http://localhost:3000/about#";var t="";switch(e){case"Option 1":t="/option1";break;case"Option 2":t="/option2";break;case"Option 3":t="/option3";break;case"Option 4":t="/option4"}window.location.href=a+t}(e.item.props.children)}},{key:"render",value:function(){return l.a.createElement(g.b,null,l.a.createElement("div",{className:"about-body"},l.a.createElement($.a,null,l.a.createElement(Q.a,{span:6},l.a.createElement(Z.a,{mode:"inline",openKeys:this.state.openKeys,onOpenChange:this.onOpenChange,style:{width:256},theme:"dark",onSelect:this.handleSelect},l.a.createElement(re,{key:"sub1",title:l.a.createElement("span",null,"1. Navigation One")},l.a.createElement(Z.a.Item,{key:"1"},"Option 1"),l.a.createElement(Z.a.Item,{key:"2"},"Option 2"),l.a.createElement(Z.a.Item,{key:"3"},"Option 3"),l.a.createElement(Z.a.Item,{key:"4"},"Option 4")),l.a.createElement(re,{key:"sub2",title:l.a.createElement("span",null,"2. Navigation Two")},l.a.createElement(Z.a.Item,{key:"5"},"Option 5"),l.a.createElement(Z.a.Item,{key:"6"},"Option 6"),l.a.createElement(re,{key:"sub3",title:"Submenu"},l.a.createElement(Z.a.Item,{key:"7"},"Option 7"),l.a.createElement(Z.a.Item,{key:"8"},"Option 8"))),l.a.createElement(re,{key:"sub4",title:l.a.createElement("span",null,"3. Navigation Three")},l.a.createElement(Z.a.Item,{key:"9"},"Option 9"),l.a.createElement(Z.a.Item,{key:"10"},"Option 10"),l.a.createElement(Z.a.Item,{key:"11"},"Option 11"),l.a.createElement(Z.a.Item,{key:"12"},"Option 12")))),l.a.createElement(Q.a,{span:18},l.a.createElement(f.c,null,l.a.createElement(f.a,{exact:!0,path:"/",component:ee}),l.a.createElement(f.a,{path:"/option1",component:ae}),l.a.createElement(f.a,{path:"/option2",component:te}),l.a.createElement(f.a,{path:"/option3",component:ne}),l.a.createElement(f.a,{path:"/option4",component:le}))))))}}]),a}(l.a.Component),se=[],ce=0;ce<4;ce++)se.push(l.a.createElement(R,{state:{BoxClassName:"lazyload-img-box",ImgClassName:"lazyload-img",src:"https://pschina.github.io/src/assets/images/"+ce+".jpg",alt:ce+".jpg",width:200,height:200}}));for(var oe=function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(h.a)(this,Object(p.a)(a).call(this,e))).state={},t}return Object(d.a)(a,e),Object(m.a)(a,[{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement("h1",null,"this is ContentUS Component!"),se)}}]),a}(l.a.Component),me=(t(118),t(67)),he=t.n(me),pe=(t(119),function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(h.a)(this,Object(p.a)(a).call(this,e))).state={},t}return Object(d.a)(a,e),Object(m.a)(a,[{key:"render",value:function(){var e=this.props.comment;return e?l.a.createElement("div",{className:"comment-reply-box"},e.map((function(e,a){return l.a.createElement("div",{className:"reply-item",key:a},l.a.createElement("aside",{className:"reply-item-avatar"},l.a.createElement("img",{src:e.avatar,alt:e.uname})),l.a.createElement("section",{className:"reply-item-body"},l.a.createElement("p",{className:"reply-item-user"},l.a.createElement("span",{className:"reply-name"},e.uname),l.a.createElement("span",{className:"reply-text"},e.message)),l.a.createElement("p",{className:"reply-item-date"},l.a.createElement("span",{className:"comment-ctime"},Object(x.handlePubdate)(e.ctime)),l.a.createElement("span",{className:"comment-like"},l.a.createElement(V.a,{type:"like"})," ",e.like),l.a.createElement(W.a,{type:"primary",size:"small",className:"comment-reply-btn"},"\u56de\u590d"))))}))):l.a.createElement("div",{className:"comment-reply-box"})}}]),a}(l.a.Component)),ue=function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(h.a)(this,Object(p.a)(a).call(this,e))).state={},t}return Object(d.a)(a,e),Object(m.a)(a,[{key:"render",value:function(){var e=this.props.comments;return e?l.a.createElement("div",{className:"player-comment"},e.map((function(e,a){return l.a.createElement("div",{className:"comment-item",key:a},l.a.createElement(U,{state:{nodeName:"aside",BoxClassName:"comment-item-avatar",src:e.avatar,alt:e.uname}}),l.a.createElement("section",{className:"comment-item-body"},l.a.createElement("p",{className:"comment-user"},e.uname),l.a.createElement("p",{className:"comment-text"},e.message),l.a.createElement("p",{className:"comment-pudate"},l.a.createElement("span",{className:"comment-ctime"},Object(x.handlePubdate)(e.ctime)),l.a.createElement("span",{className:"comment-like"},l.a.createElement(V.a,{type:"like"})," ",e.like),l.a.createElement(W.a,{type:"primary",size:"small",className:"comment-reply-btn"},"\u56de\u590d")),l.a.createElement(pe,{comment:e.replies})))}))):l.a.createElement("div",{className:"player-comment"})}}]),a}(l.a.Component),de=t(36),ge=[],fe=0;fe<20;fe++)ge[fe]=!1;function ve(e,a,t,n){this.container=e,this.content=a,this.label=!1;for(var l=0;l<20;l++)if(!ge[l]){ge[l]=!0,this.Sign=l;break}this.time=n||null;this.styles=t||{fontSize:"25px",color:"#fff",position:"absolute",whiteSpace:"nowrap"},this.div=null,this.__wdith=document.body.clientWidth,this.count=0,this.gap=20}ve.prototype.create=function(){this.top=33*this.Sign+10;var e=document.createElement("div");for(var a in e.innerHTML=this.content,e.style.top=this.top+"px",this.styles)e.style[a]=this.styles[a];return e.style.left=this.__wdith+"px",this.div=e,this.container.append(e),this.__self=parseInt(this.styles.fontSize)*this.content.length,this},ve.prototype.move=function(e){var a=this;this.speed=e||1;var t=setInterval((function(){a.count++,parseInt(a.div.style.left)+a.__self+a.gap<a.__wdith&&!a.label&&(ge[a.Sign]=!1,a.label=!0),parseInt(a.div.style.left)<-a.__self?(clearInterval(t),a.container.removeChild(a.div)):a.div.style.left=parseInt(a.div.style.left)-a.speed+"px"}),10)};var be=ve,ye=t(196),Ee=[],ke=null;L.iptoggle?T.a.get("http://satan.viphk.ngrok.org?aim=barrage").then((function(e){Ee=e.data})):T.a.get("http://localhost:4000?aim=barrage").then((function(e){Ee=e.data}));var Ne=function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(h.a)(this,Object(p.a)(a).call(this,e))).state={message:null,icons:[{type:"like",name:"\u559c\u6b22"},{type:"copyright",name:"\u786c\u5e01"},{type:"star",name:"\u6536\u85cf"},{type:"share-alt",name:"\u8f6c\u53d1"}],tags:[],comments:[],play_url:""},t.handleSwitch=t.handleSwitch.bind(Object(u.a)(t)),t.handlePressEnter=t.handlePressEnter.bind(Object(u.a)(t)),t.handleTimeUpdate=t.handleTimeUpdate.bind(Object(u.a)(t)),t.handleCurrentTime=t.handleCurrentTime.bind(Object(u.a)(t)),t.handleVideoClick=t.handleVideoClick.bind(Object(u.a)(t)),t}return Object(d.a)(a,e),Object(m.a)(a,[{key:"UNSAFE_componentWillMount",value:function(){var e=this,a=this.props.location.search.replace("?",""),t=B.a.parse(a),n=t.arcurl,l=t.tag;L.iptoggle?T.a.get("http://satan.viphk.ngrok.org?aim=message&&val="+n).then((function(a){var t=a.data;e.setState({message:t}),T.a.get("http://satan.viphk.ngrok.org?aim=comment&&val="+t.aid).then((function(a){e.setState({comments:a.data}),T.a.get("http://satan.viphk.ngrok.org?aim=download&&val="+n).then((function(a){e.setState({play_url:a.data})}))}))})):T.a.get("http://localhost:4000?aim=message&&val="+n).then((function(a){var t=a.data;e.setState({message:t}),T.a.get("http://localhost:4000?aim=comment&&val="+t.aid).then((function(a){e.setState({comments:a.data}),T.a.get("http://localhost:4000?aim=download&&val="+n).then((function(a){e.setState({play_url:a.data})}))}))})),this.setState({tags:l.split(",")})}},{key:"handleTimeUpdate",value:function(){var e=this.video.currentTime;this.handleCurrentTime(e)}},{key:"handleCurrentTime",value:function(e){for(var a=this.playerbox,t=0,n=Ee.length;t<n;t++)if(Math.abs(e-Ee[t].currentTime)<.12)if(Ee[t].isEnter){new be(a,Ee[t].content,{fontSize:"25px",color:"#fff",position:"absolute",whiteSpace:"nowrap",borderBottom:"1px solid #ff80b0"}).create().move()}else new be(a,Ee[t].content,ke).create().move()}},{key:"handleVideoClick",value:function(){}},{key:"handleSwitch",value:function(e){var a=null;e||(a={fontSize:"25px",color:"transparent",position:"absolute",whiteSpace:"nowrap"}),ke=a}},{key:"handlePressEnter",value:function(e){var a=e.target.value;console.log(a);var t=Object(ye.checkSensitive)(a,"/Users/sataniya/Desktop/my-app/src/algorithm/sensitive").hasSensitive;console.log(t);var n={content:a,currentTime:this.video.currentTime+1,isEnter:!0};Ee.push(n),L.iptoggle?T.a.post("http://satan.viphk.ngrok.org?aim=submitbarrage",Object(x.formate)(n)).then((function(e){console.log(e.data)})):T.a.post("http://localhost:4000?aim=submitbarrage",Object(x.formate)(n)).then((function(e){console.log(e.data)}))}},{key:"render",value:function(){var e=this,a=this.state,t=a.message,n=a.icons,r=a.tags,i=a.comments,s=a.play_url;if(t){if(s){if(Object(x.isFLV)(s)&&de.a.isSupported()){var c=de.a.createPlayer({type:"flv",isLive:!0,url:s,hasAudio:!0,hasVideo:!0,enableStashBuffer:!0});c.attachMediaElement(this.video),c.load(),c.play()}if(Object(x.isMP4)(s)){var o=this.props.location.search.replace("?",""),m=B.a.parse(o).arcurl;L.iptoggle?this.video.src="http://satan.viphk.ngrok.org?aim=source&&val="+m:this.video.src="http://localhost:4000?aim=source&&val="+m}}var h=/^\u3010/.test(t.title)?"player-title-remove":"player-title";return l.a.createElement("div",{className:"player-body"},l.a.createElement("div",{className:"player-top"},l.a.createElement("aside",{className:"player-top-left"},l.a.createElement("h1",{className:h},t.title),l.a.createElement("p",{className:"player-time"},t.tname+" "+Object(x.handlePubdate)(t.pubdate)),l.a.createElement("span",{className:"player-view"},Object(x.handleView)(t.stat.view)+"\u64ad\u653e"),l.a.createElement("span",{className:"player-danmaku"},Object(x.handleDanmaku)(t.stat.danmaku)+"\u5f39\u5e55")),l.a.createElement("section",{className:"player-top-right"},l.a.createElement(U,{state:{BoxClassName:"player-top-right-aside",ImgClassName:"player-top-right-img",src:t.owner.face,alt:t.owner.name}}),l.a.createElement("div",{className:"player-top-right-section"},l.a.createElement("p",{className:"player-top-right-user"},l.a.createElement(O.a,{color:"magenta"},"\u4f5c\u8005"),t.owner.name),l.a.createElement(W.a,{type:"primary",shape:"round"},l.a.createElement(V.a,{type:"plus-circle",theme:"filled"})," \u7acb\u5373\u5173\u6ce8")))),l.a.createElement("div",{className:"player-box",ref:function(a){return e.playerbox=a}},l.a.createElement("div",{className:"player-container"},l.a.createElement("video",{src:"",controls:!0,onTimeUpdate:this.handleTimeUpdate,ref:function(a){return e.video=a},autoPlay:!0,onClick:this.handleVideoClick,className:"player-video"})),l.a.createElement("div",{className:"player-sendbar"},l.a.createElement("span",{className:"player-danmaku-inline"},Object(x.handleDanmaku)(t.stat.danmaku)+" \u6761\u5b9e\u65f6\u5f39\u5e55"),l.a.createElement(C.a,{defaultValue:"barrage...",style:{width:300},className:"player-input-barrage",onPressEnter:this.handlePressEnter}),l.a.createElement(he.a,{defaultChecked:!0,onChange:this.handleSwitch})),l.a.createElement("div",{className:"player-toolbar"},n.map((function(e){return l.a.createElement("span",{className:"player-toolbar-icon",key:e.type},l.a.createElement(V.a,{type:e.type})," ",e.name)}))),l.a.createElement("div",{className:"player-info"},l.a.createElement("p",{className:"player-info-desc"},t.desc),l.a.createElement("p",{className:"player-info-tag"},r.map((function(e){return l.a.createElement(O.a,{color:"purple",key:e},e)})))),l.a.createElement(ue,{comments:i})))}return l.a.createElement("div",{className:"player-loading"},l.a.createElement(b.a,{tip:"Loading...",size:"large"}))}}]),a}(l.a.Component),Oe=(t(188),t(437),function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(h.a)(this,Object(p.a)(a).call(this,e))).state={loading:!0,bangumi_message:null},t.handleInitBangumiInfo=t.handleInitBangumiInfo.bind(Object(u.a)(t)),t.handleInitBangumiInfo(),t}return Object(d.a)(a,e),Object(m.a)(a,[{key:"handleInitBangumiInfo",value:function(){var e=this,a=this.props.state,t=a.datas,n=a.list,l=n?n.url:t.url;L.iptoggle?T.a.get("http://satan.viphk.ngrok.org?aim=message&&val="+l).then((function(a){e.setState({bangumi_message:a.data,loading:!1})})):T.a.get("http://localhost:4000?aim=message&&val="+l).then((function(a){e.setState({bangumi_message:a.data,loading:!1})}))}},{key:"render",value:function(){var e=this.props.state,a=e.datas,t=e.message,n=e.list,r=this.state,i=r.bangumi_message,s=r.loading;if(t||(t=i),!t)return l.a.createElement("section",{className:"wb-info"},l.a.createElement(b.a,{spinning:s}));n&&(a=n);var c=a.long_title?a.long_title:a.title;c=Object(x.handleTitle)(c);var o="";return"media_ft"===a.type?(o="wb-info-desc-ft",l.a.createElement("section",{className:"wb-info"},l.a.createElement("h1",{className:"wb-info-title"},l.a.createElement(O.a,{color:"magenta"},a.season_type_name?a.season_type_name:t.tname)," ",c),l.a.createElement("h2",{className:"wb-info-subtitle"},l.a.createElement(O.a,{color:"geekblue"},t.tname)," ",Object(x.handleTitle)(a.org_title)),l.a.createElement("p",{className:"wb-info-view"},"\u66f4\u65b0\u65e5\u671f\uff1a",l.a.createElement("span",{className:"wb-info-view-text"},Object(x.handlePubdate)(t.pubdate))),l.a.createElement("div",{className:"wb-info-view-box"},l.a.createElement("p",{className:"wb-info-view-left"},l.a.createElement("span",{className:"wb-info-label"},"\u64ad\u653e\uff1a"),l.a.createElement("span",{className:"wb-info-value"},Object(x.handleView)(t.stat.view))),l.a.createElement("p",{className:"wb-info-view-right"},l.a.createElement("span",{className:"wb-info-label"},"\u5f39\u5e55\uff1a"),l.a.createElement("span",{className:"wb-info-value"},Object(x.handleDanmaku)(t.stat.danmaku)))),l.a.createElement("div",{className:"wb-info-view-box"},l.a.createElement("p",{className:"wb-info-view-left"},l.a.createElement("span",{className:"wb-info-label"},"\u98ce\u683c\uff1a"),l.a.createElement("span",{className:"wb-info-value"},a.styles)),l.a.createElement("p",{className:"wb-info-view-right"},l.a.createElement("span",{className:"wb-info-label"},"\u58f0\u4f18\uff1a"),l.a.createElement("span",{className:"wb-info-value"},a.cv))),l.a.createElement("p",{className:"wb-info-view"},"\u9635\u5bb9\uff1a",l.a.createElement("span",{className:"wb-info-view-text"},a.staff)),l.a.createElement("p",{className:o},a.desc),l.a.createElement("p",{className:"wb-info-tag"},l.a.createElement(O.a,{color:"purple"},t.owner.name),l.a.createElement(O.a,{color:"purple"},t.tname)))):(o="wb-info-desc",l.a.createElement("section",{className:"wb-info"},l.a.createElement("h1",{className:"wb-info-title"},l.a.createElement(O.a,{color:"magenta"},a.season_type_name?a.season_type_name:t.tname)," ",c),l.a.createElement("p",{className:"wb-info-view"},"\u66f4\u65b0\u65e5\u671f\uff1a",Object(x.handlePubdate)(t.pubdate)),l.a.createElement("p",{className:"wb-info-view"},"\u64ad\u653e\uff1a",Object(x.handleView)(t.stat.view)," \u5f39\u5e55\uff1a",Object(x.handleDanmaku)(t.stat.danmaku)),l.a.createElement("p",{className:o},a.desc),l.a.createElement("p",{className:"wb-info-tag"},l.a.createElement(O.a,{color:"purple"},t.owner.name),l.a.createElement(O.a,{color:"purple"},t.tname))))}}]),a}(l.a.Component)),we=function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(h.a)(this,Object(p.a)(a).call(this,e))).state={pageindex:null,pagemessage:null,loading:!1},t.handlePage=t.handlePage.bind(Object(u.a)(t)),t.handlePrevButton=t.handlePrevButton.bind(Object(u.a)(t)),t.handleNextButton=t.handleNextButton.bind(Object(u.a)(t)),t.handleButtonClick=t.handleButtonClick.bind(Object(u.a)(t)),t.handleCenterButtonClick=t.handleCenterButtonClick.bind(Object(u.a)(t)),t}return Object(d.a)(a,e),Object(m.a)(a,[{key:"UNSAFE_componentWillMount",value:function(){var e=this.props.state,a=e.index;e.list||this.setState({pageindex:a})}},{key:"handlePrevButton",value:function(){var e=this,a=this.props.state.data,t=this.state.pageindex,n=t-1>=0?t-1:0;if(n!==t){this.setState({loading:!0});var l=a[n].url;L.iptoggle?T.a.get("http://satan.viphk.ngrok.org?aim=message&&val="+l).then((function(a){e.setState({pagemessage:a.data,pageindex:n,loading:!1})})):T.a.get("http://localhost:4000?aim=message&&val="+l).then((function(a){e.setState({pagemessage:a.data,pageindex:n,loading:!1})}))}}},{key:"handleNextButton",value:function(){var e=this,a=this.props.state.data,t=this.state.pageindex,n=t+1<a.length?t+1:t;if(n!==t){this.setState({loading:!0});var l=a[n].url;L.iptoggle?T.a.get("http://satan.viphk.ngrok.org?aim=message&&val="+l).then((function(a){e.setState({pagemessage:a.data,pageindex:n,loading:!1})})):T.a.get("http://localhost:4000?aim=message&&val="+l).then((function(a){e.setState({pagemessage:a.data,pageindex:n,loading:!1})}))}}},{key:"handleButtonClick",value:function(e,a){var t=this.props.state.pathname;return{pathname:Object(x.handleToggleBangumi)(t),state:{data:e,index:a}}}},{key:"handleCenterButtonClick",value:function(e,a,t){if("\u7acb\u5373\u89c2\u770b"===t){var n=this.props.state.pathname,r={pathname:Object(x.handleToggleBangumi)(n),state:{data:e,index:a}};return l.a.createElement(W.a,{type:"primary",shape:"round"},l.a.createElement(g.c,{to:r},l.a.createElement(V.a,{type:"play-circle",theme:"filled"})," ",t))}return l.a.createElement(W.a,{type:"primary",shape:"round"},l.a.createElement(V.a,{type:"play-circle",theme:"filled"})," ",t)}},{key:"handlePage",value:function(e,a,t){if(e.cover&&a!==t){if(a===this.props.state.index)return l.a.createElement("div",{className:"swiper-item"},l.a.createElement(U,{state:{nodeName:"aside",BoxClassName:"wb-aside",ImgClassName:"wb-img",src:e.cover,alt:e.long_title}}),l.a.createElement("div",{className:"swiper-info-show"},l.a.createElement("p",{className:"swiper-tag"},e.long_title),l.a.createElement(W.a,{type:"primary",shape:"round"},l.a.createElement(V.a,{type:"play-circle",theme:"filled"})," \u6b63\u5728\u89c2\u770b")));var n=this.props.state.data;return l.a.createElement("div",{className:"swiper-item"},l.a.createElement(U,{state:{nodeName:"aside",BoxClassName:"wb-aside",ImgClassName:"wb-img",src:e.cover,alt:e.long_title}}),l.a.createElement("div",{className:"swiper-info-show"},l.a.createElement("p",{className:"swiper-tag"},e.long_title),l.a.createElement(W.a,{type:"primary",shape:"round"},l.a.createElement(g.c,{to:this.handleButtonClick(n,a)},l.a.createElement(V.a,{type:"play-circle",theme:"filled"})," \u7acb\u5373\u89c2\u770b"))))}return l.a.createElement("div",{className:"swiper-item"},l.a.createElement(U,{state:{nodeName:"aside",BoxClassName:"wb-aside",ImgClassName:"swiper-error-img",src:"https://s1.hdslb.com/bfs/static/jinkela/search/asserts/no-data.png",alt:"\u6ca1\u6709\u4e86\u5c0f\u8001\u5f1f"}}),l.a.createElement("div",{className:"swiper-info-show"},l.a.createElement("p",{className:"swiper-tag"},"\u6ca1\u6709\u4e86\u5c0f\u8001\u5f1f"),l.a.createElement(W.a,{type:"primary",shape:"round"},l.a.createElement(V.a,{type:"play-circle",theme:"filled"})," \u83ab\u5f97\u89c2\u770b")))}},{key:"render",value:function(){var e=this.props.state,a=e.data,t=e.index,n=e.message,r=e.list,i=this.state,s=i.pageindex,c=i.pagemessage,o=i.loading;if(r)return l.a.createElement("div",{className:"wb-info-box"},l.a.createElement(U,{state:{nodeName:"aside",BoxClassName:"wb-aside-ft",ImgClassName:"wb-img",src:r.cover,alt:r.long_title}}),l.a.createElement(Oe,{state:{list:r,message:n}}));var m=a[t],h=s-1>=0?s-1:0,p=h>=0?a[h]:{},u=s+1<a.length?s+1:s,d=u<a.length?a[u]:{},g="\u6b63\u5728\u89c2\u770b";return t!==s&&(n=c,m=a[s],g="\u7acb\u5373\u89c2\u770b"),l.a.createElement(b.a,{spinning:o,tip:"loading..."},l.a.createElement("div",{className:"swiper"},l.a.createElement("div",{className:"swiper-prev"},l.a.createElement(W.a,{type:"primary",shape:"circle",icon:"left",onClick:this.handlePrevButton})),l.a.createElement("div",{className:"swiper-left"},this.handlePage(p,h,s)),l.a.createElement("div",{className:"swiper-center"},l.a.createElement("div",{className:"swiper-center-img"},l.a.createElement(U,{state:{nodeName:"aside",BoxClassName:"wb-aside",ImgClassName:"wb-img",src:m.cover,alt:m.long_title}}),l.a.createElement("div",{className:"swiper-info-show"},l.a.createElement("p",{className:"swiper-tag"},m.long_title),this.handleCenterButtonClick(a,s,g))),l.a.createElement(Oe,{state:{datas:m,message:n}})),l.a.createElement("div",{className:"swiper-right"},this.handlePage(d,u,s)),l.a.createElement("div",{className:"swiper-next"},l.a.createElement(W.a,{type:"primary",shape:"circle",icon:"right",onClick:this.handleNextButton}))))}}]),a}(l.a.Component),je=[],Se=null;L.iptoggle?T.a.get("http://satan.viphk.ngrok.org?aim=barrage").then((function(e){je=e.data})):T.a.get("http://localhost:4000?aim=barrage").then((function(e){je=e.data}));var Ce=function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(h.a)(this,Object(p.a)(a).call(this,e))).state={message:null,icons:[{type:"like",name:"\u559c\u6b22"},{type:"copyright",name:"\u786c\u5e01"},{type:"star",name:"\u6536\u85cf"},{type:"share-alt",name:"\u8f6c\u53d1"}],tags:[],comments:[],play_url:"",loading:!0},t.handleInitMessage=t.handleInitMessage.bind(Object(u.a)(t)),t.handleSwitch=t.handleSwitch.bind(Object(u.a)(t)),t.handlePressEnter=t.handlePressEnter.bind(Object(u.a)(t)),t.handleTimeUpdate=t.handleTimeUpdate.bind(Object(u.a)(t)),t.handleCurrentTime=t.handleCurrentTime.bind(Object(u.a)(t)),t.handleVideoClick=t.handleVideoClick.bind(Object(u.a)(t)),t.handleInitMessage(),t}return Object(d.a)(a,e),Object(m.a)(a,[{key:"handleInitMessage",value:function(){var e=this,a=this.props.location.state,t=a.data,n=a.index,l=a.list,r=l?l.url:t[n].url;L.iptoggle?T.a.get("http://satan.viphk.ngrok.org?aim=message&&val="+r).then((function(a){var t=a.data;e.setState({message:t,loading:!1}),T.a.get("http://satan.viphk.ngrok.org?aim=comment&&val="+t.aid).then((function(a){e.setState({comments:a.data}),T.a.get("http://satan.viphk.ngrok.org?aim=download&&val="+r).then((function(a){var t=a.data;e.setState({play_url:t})}))}))})):T.a.get("http://localhost:4000?aim=message&&val="+r).then((function(a){var t=a.data;e.setState({message:t,loading:!1}),T.a.get("http://localhost:4000?aim=comment&&val="+t.aid).then((function(a){e.setState({comments:a.data}),T.a.get("http://localhost:4000?aim=download&&val="+r).then((function(a){var t=a.data;e.setState({play_url:t})}))}))}))}},{key:"handleTimeUpdate",value:function(){var e=this.video.currentTime;this.handleCurrentTime(e)}},{key:"handleCurrentTime",value:function(e){for(var a=this.playerbox,t=0,n=je.length;t<n;t++)if(Math.abs(e-je[t].currentTime)<.12)if(je[t].isEnter){new be(a,je[t].content,{fontSize:"25px",color:"#fff",position:"absolute",whiteSpace:"nowrap",borderBottom:"1px solid #ff80b0"}).create().move()}else new be(a,je[t].content,Se).create().move()}},{key:"handleVideoClick",value:function(){}},{key:"handleSwitch",value:function(e){console.log(e);var a=null;e||(a={fontSize:"25px",color:"transparent",position:"absolute",whiteSpace:"nowrap"}),Se=a}},{key:"handlePressEnter",value:function(e){var a={content:e.target.value,currentTime:this.video.currentTime+1,isEnter:!0};je.push(a),L.iptoggle?T.a.post("http://satan.viphk.ngrok.org?aim=submitbarrage",Object(x.formate)(a)).then((function(e){console.log(e.data)})):T.a.post("http://localhost:4000?aim=submitbarrage",Object(x.formate)(a)).then((function(e){console.log(e.data)}))}},{key:"render",value:function(){var e=this,a=this.props.location,t=a.state,n=a.pathname,r=t.data,i=t.index,s=t.list,c=s?s.url:r[i].url,o=this.state,m=o.message,h=o.icons,p=o.comments,u=o.play_url,d=o.loading;if(m){if(u){if(Object(x.isFLV)(u)&&de.a.isSupported()){var g=null;(g=L.iptoggle?de.a.createPlayer({type:"flv",isLive:!0,url:"http://satan.viphk.ngrok.org?aim=source&&val="+c,hasAudio:!0,hasVideo:!0,enableStashBuffer:!0}):de.a.createPlayer({type:"flv",isLive:!0,url:"http://localhost:4000?aim=source&&val="+c,hasAudio:!0,hasVideo:!0,enableStashBuffer:!0})).attachMediaElement(this.video),g.load(),g.play()}Object(x.isMP4)(u)&&(L.iptoggle?this.video.src="http://satan.viphk.ngrok.org?aim=source&&val="+c:this.video.src="http://localhost:4000?aim=source&&val="+c)}var f=/^\u3010/.test(m.title)?"player-title-remove":"player-title";return l.a.createElement("div",{className:"player-body"},l.a.createElement("div",{className:"player-top"},l.a.createElement("aside",{className:"player-top-left"},l.a.createElement("h1",{className:f},m.title),l.a.createElement("p",{className:"player-time"},m.tname+" "+Object(x.handlePubdate)(m.pubdate)),l.a.createElement("span",{className:"player-view"},Object(x.handleView)(m.stat.view)+"\u64ad\u653e"),l.a.createElement("span",{className:"player-danmaku"},Object(x.handleDanmaku)(m.stat.danmaku)+"\u5f39\u5e55")),l.a.createElement("section",{className:"player-top-right"},l.a.createElement(U,{state:{BoxClassName:"player-top-right-aside",ImgClassName:"player-top-right-img",src:m.owner.face,alt:m.owner.name}}),l.a.createElement("div",{className:"player-top-right-section"},l.a.createElement("p",{className:"player-top-right-user"},l.a.createElement(O.a,{color:"magenta"},"\u4f5c\u8005"),m.owner.name),l.a.createElement(W.a,{type:"primary",shape:"round"},l.a.createElement(V.a,{type:"plus-circle",theme:"filled"})," \u7acb\u5373\u5173\u6ce8")))),l.a.createElement("div",{className:"player-box",ref:function(a){return e.playerbox=a}},l.a.createElement("div",{className:"player-container"},l.a.createElement("video",{src:"",controls:!0,onTimeUpdate:this.handleTimeUpdate,ref:function(a){return e.video=a},autoPlay:!0,onClick:this.handleVideoClick,className:"player-video"})),l.a.createElement("div",{className:"player-sendbar"},l.a.createElement("span",{className:"player-danmaku-inline"},Object(x.handleDanmaku)(m.stat.danmaku)+" \u6761\u5b9e\u65f6\u5f39\u5e55"),l.a.createElement(C.a,{defaultValue:"barrage...",style:{width:300},className:"player-input-barrage",onPressEnter:this.handlePressEnter}),l.a.createElement(he.a,{defaultChecked:!0,onChange:this.handleSwitch})),l.a.createElement("div",{className:"player-toolbar"},h.map((function(e){return l.a.createElement("span",{className:"player-toolbar-icon",key:e.type},l.a.createElement(V.a,{type:e.type})," ",e.name)}))),l.a.createElement(b.a,{spinning:d,tip:"loading..."},l.a.createElement(we,{state:{data:r,index:i,message:m,list:s,pathname:n}})),l.a.createElement(ue,{comments:p})))}return l.a.createElement("div",{className:"player-loading"},l.a.createElement(b.a,{tip:"Loading...",size:"large"}))}}]),a}(l.a.Component),xe=[],_e=null;L.iptoggle?T.a.get("http://satan.viphk.ngrok.org?aim=barrage").then((function(e){xe=e.data})):T.a.get("http://localhost:4000?aim=barrage").then((function(e){xe=e.data}));var Te=function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(h.a)(this,Object(p.a)(a).call(this,e))).state={message:null,icons:[{type:"like",name:"\u559c\u6b22"},{type:"copyright",name:"\u786c\u5e01"},{type:"star",name:"\u6536\u85cf"},{type:"share-alt",name:"\u8f6c\u53d1"}],tags:[],comments:[],play_url:"",loading:!0},t.handleInitMessage=t.handleInitMessage.bind(Object(u.a)(t)),t.handleSwitch=t.handleSwitch.bind(Object(u.a)(t)),t.handlePressEnter=t.handlePressEnter.bind(Object(u.a)(t)),t.handleTimeUpdate=t.handleTimeUpdate.bind(Object(u.a)(t)),t.handleCurrentTime=t.handleCurrentTime.bind(Object(u.a)(t)),t.handleVideoClick=t.handleVideoClick.bind(Object(u.a)(t)),t.handleInitMessage(),t}return Object(d.a)(a,e),Object(m.a)(a,[{key:"handleInitMessage",value:function(){var e=this,a=this.props.location.state,t=a.data,n=a.index,l=a.list,r=l?l.url:t[n].url;L.iptoggle?T.a.get("http://satan.viphk.ngrok.org?aim=message&&val="+r).then((function(a){var t=a.data;e.setState({message:t,loading:!1}),T.a.get("http://satan.viphk.ngrok.org?aim=comment&&val="+t.aid).then((function(a){e.setState({comments:a.data}),T.a.get("http://satan.viphk.ngrok.org?aim=download&&val="+r).then((function(a){var t=a.data;e.setState({play_url:t})}))}))})):T.a.get("http://localhost:4000?aim=message&&val="+r).then((function(a){var t=a.data;e.setState({message:t,loading:!1}),T.a.get("http://localhost:4000?aim=comment&&val="+t.aid).then((function(a){e.setState({comments:a.data}),T.a.get("http://localhost:4000?aim=download&&val="+r).then((function(a){var t=a.data;e.setState({play_url:t})}))}))}))}},{key:"handleTimeUpdate",value:function(){var e=this.video.currentTime;this.handleCurrentTime(e)}},{key:"handleCurrentTime",value:function(e){for(var a=this.playerbox,t=0,n=xe.length;t<n;t++)if(Math.abs(e-xe[t].currentTime)<.12)if(xe[t].isEnter){new be(a,xe[t].content,{fontSize:"25px",color:"#fff",position:"absolute",whiteSpace:"nowrap",borderBottom:"1px solid #ff80b0"}).create().move()}else new be(a,xe[t].content,_e).create().move()}},{key:"handleVideoClick",value:function(){}},{key:"handleSwitch",value:function(e){console.log(e);var a=null;e||(a={fontSize:"25px",color:"transparent",position:"absolute",whiteSpace:"nowrap"}),_e=a}},{key:"handlePressEnter",value:function(e){var a={content:e.target.value,currentTime:this.video.currentTime+1,isEnter:!0};xe.push(a),L.iptoggle?T.a.post("http://satan.viphk.ngrok.org?aim=submitbarrage",Object(x.formate)(a)).then((function(e){console.log(e.data)})):T.a.post("http://localhost:4000?aim=submitbarrage",Object(x.formate)(a)).then((function(e){console.log(e.data)}))}},{key:"render",value:function(){var e=this,a=this.props.location,t=a.state,n=a.pathname,r=t.data,i=t.index,s=t.list,c=s?s.url:r[i].url,o=this.state,m=o.message,h=o.icons,p=o.comments,u=o.play_url,d=o.loading;if(m){if(u){if(Object(x.isFLV)(u)&&de.a.isSupported()){var g=null;(g=L.iptoggle?de.a.createPlayer({type:"flv",isLive:!0,url:"http://satan.viphk.ngrok.org?aim=source&&val="+c,hasAudio:!0,hasVideo:!0,enableStashBuffer:!0}):de.a.createPlayer({type:"flv",isLive:!0,url:"http://localhost:4000?aim=source&&val="+c,hasAudio:!0,hasVideo:!0,enableStashBuffer:!0})).attachMediaElement(this.video),g.load(),g.play()}Object(x.isMP4)(u)&&(L.iptoggle?this.video.src="http://satan.viphk.ngrok.org?aim=source&&val="+c:this.video.src="http://localhost:4000?aim=source&&val="+c)}var f=/^\u3010/.test(m.title)?"player-title-remove":"player-title";return l.a.createElement("div",{className:"player-body"},l.a.createElement("div",{className:"player-top"},l.a.createElement("aside",{className:"player-top-left"},l.a.createElement("h1",{className:f},m.title),l.a.createElement("p",{className:"player-time"},m.tname+" "+Object(x.handlePubdate)(m.pubdate)),l.a.createElement("span",{className:"player-view"},Object(x.handleView)(m.stat.view)+"\u64ad\u653e"),l.a.createElement("span",{className:"player-danmaku"},Object(x.handleDanmaku)(m.stat.danmaku)+"\u5f39\u5e55")),l.a.createElement("section",{className:"player-top-right"},l.a.createElement(U,{state:{BoxClassName:"player-top-right-aside",ImgClassName:"player-top-right-img",src:m.owner.face,alt:m.owner.name}}),l.a.createElement("div",{className:"player-top-right-section"},l.a.createElement("p",{className:"player-top-right-user"},l.a.createElement(O.a,{color:"magenta"},"\u4f5c\u8005"),m.owner.name),l.a.createElement(W.a,{type:"primary",shape:"round"},l.a.createElement(V.a,{type:"plus-circle",theme:"filled"})," \u7acb\u5373\u5173\u6ce8")))),l.a.createElement("div",{className:"player-box",ref:function(a){return e.playerbox=a}},l.a.createElement("div",{className:"player-container"},l.a.createElement("video",{src:"",controls:!0,onTimeUpdate:this.handleTimeUpdate,ref:function(a){return e.video=a},autoPlay:!0,onClick:this.handleVideoClick,className:"player-video"})),l.a.createElement("div",{className:"player-sendbar"},l.a.createElement("span",{className:"player-danmaku-inline"},Object(x.handleDanmaku)(m.stat.danmaku)+" \u6761\u5b9e\u65f6\u5f39\u5e55"),l.a.createElement(C.a,{defaultValue:"barrage...",style:{width:300},className:"player-input-barrage",onPressEnter:this.handlePressEnter}),l.a.createElement(he.a,{defaultChecked:!0,onChange:this.handleSwitch})),l.a.createElement("div",{className:"player-toolbar"},h.map((function(e){return l.a.createElement("span",{className:"player-toolbar-icon",key:e.type},l.a.createElement(V.a,{type:e.type})," ",e.name)}))),l.a.createElement(b.a,{spinning:d,tip:"loading..."},l.a.createElement(we,{state:{data:r,index:i,message:m,list:s,pathname:n}})),l.a.createElement(ue,{comments:p})))}return l.a.createElement("div",{className:"player-loading"},l.a.createElement(b.a,{tip:"Loading...",size:"large"}))}}]),a}(l.a.Component),Ie=function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(h.a)(this,Object(p.a)(a).call(this,e))).state={history:[]},t.handleSearch=t.handleSearch.bind(Object(u.a)(t)),t}return Object(d.a)(a,e),Object(m.a)(a,[{key:"UNSAFE_componentWillMount",value:function(){var e=localStorage.getItem("search-history");e||(e="\u544a\u767d\u6c14\u7403");var a=e.split(",");this.setState({history:a})}},{key:"handleSearch",value:function(e){L.iptoggle?window.location.href="http://sha.viphk.ngrok.org/search?val="+e:window.location.href="http://localhost:3000/search?val="+e;var a=localStorage.getItem("search-history").split(",");a.push(e),a=Array.from(new Set(a)),localStorage.setItem("search-history",a)}},{key:"render",value:function(){var e=this.state.history;return l.a.createElement(g.a,null,l.a.createElement("div",{className:"App"},l.a.createElement("header",{className:"App-header"},l.a.createElement(g.c,{to:"/home",className:"header-item"},"Home"),l.a.createElement(g.c,{to:"/search",className:"header-item"},"Search"),l.a.createElement(g.c,{to:"/about",className:"header-item"},"About"),l.a.createElement(c.a,{showSearch:!0,defaultValue:"\u544a\u767d\u6c14\u7403",className:"header-item header-last header-search",size:"small",onSelect:this.handleSearch},e.map((function(e){return l.a.createElement(c.a.Option,{value:e,key:e},e)}))),l.a.createElement(g.c,{to:"/contentus",className:"header-item"},"ContentUS")),l.a.createElement(f.c,null,l.a.createElement(f.a,{exact:!0,path:"/",component:k}),l.a.createElement(f.a,{path:"/home",component:k}),l.a.createElement(f.a,{exact:!0,path:"/search",component:J}),l.a.createElement(f.a,{path:"/search/player",component:Ne}),l.a.createElement(f.a,{path:"/search/bangumi",component:Ce}),l.a.createElement(f.a,{path:"/search/bangumisub",component:Te}),l.a.createElement(f.a,{path:"/about",component:ie}),l.a.createElement(f.a,{path:"/contentus",component:oe}))))}}]),a}(l.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(l.a.createElement(Ie,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},8:function(e,a,t){(function(a){var n=t(103),l=t(280),r=t(15).sessdata;function i(e){return new Promise((function(t,l){Array.isArray(e)&&(e=e[0]),n.get({url:e,headers:{Referer:e,"User-Agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_5) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/12.1.1 Safari/605.1.15",Cookie:"SESSDATA="+r}}).then((function(l){var i=[];l.on("data",(function(e){i.push(e)})).on("end",(function(){var l=JSON.parse(a.concat(i).toString()).data.durl[0].url;n.get({url:l,headers:{Referer:e,"User-Agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_5) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/12.1.1 Safari/605.1.15",Cookie:"SESSDATA="+r}}).then((function(e){t(e)}))}))}))}))}e.exports={handlePubdate:function(e){var a=new Date(1e3*e);return a.toLocaleDateString().replace(/\//g,"-")+" "+a.toTimeString().replace("GMT+0800 (\u4e2d\u56fd\u6807\u51c6\u65f6\u95f4)","").trim()},handleView:function(e){return e>=1e4?(e/1e4).toFixed(1)+"\u4e07":e},handleDanmaku:function(e){return e>=1e4?(e/1e4).toFixed(1)+"\u4e07":e},formate:function(e){var a="";for(var t in e)a+=t+"="+e[t]+"&";return a.replace(/&$/g,"")},handledate:function(e){return new Date(1e3*e).toLocaleDateString().replace(/\//g,"-")},handleType:function(e){switch(e){case"media_bangumi":return"\u756a\u5267";case"video":return"\u89c6\u9891";case"media_ft":return"\u7535\u5f71"}},handleTextContent:function(e){return e.match(/>(.*?)</)[1]},isFLV:function(e){return"flv"===e.match(/\.([^.]+?)\?/)[1]},isMP4:function(e){return"mp4"===e.match(/\.([^.]+?)\?/)[1]},getMP4SourceByLink:i,getMP4SourceByUrl:function(e){return new Promise((function(a,t){l.getVideoDownLinkByurl(e).then((function(e){i(e).then((function(e){a(e)}))}))}))},getSourceAddress:function(e){return new Promise((function(t,i){l.getVideoDownLinkByurl(e).then((function(e){Array.isArray(e)&&(e=e[0]),n.get({url:e,headers:{Referer:e,"User-Agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_5) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/12.1.1 Safari/605.1.15",Cookie:"SESSDATA="+r}}).then((function(e){var n=[];e.on("data",(function(e){n.push(e)})).on("end",(function(){var e=JSON.parse(a.concat(n).toString()).data.durl[0].url;t(e)}))}))}))}))},handleTitle:function(e){return e.replace(/<.*?>/g,"")},getAuthorInfo:function(e){return new Promise((function(e,a){n.get({url:"https://space.bilibili.com/15253026"}).then((function(a){e(a)}))}))},handleToggleBangumi:function(e){return"/search/bangumi"===e?"/search/bangumisub":"/search/bangumisub"===e?"/search/bangumi":void 0}}}).call(this,t(32).Buffer)}},[[197,1,2]]]);
//# sourceMappingURL=main.3f59a1c8.chunk.js.map